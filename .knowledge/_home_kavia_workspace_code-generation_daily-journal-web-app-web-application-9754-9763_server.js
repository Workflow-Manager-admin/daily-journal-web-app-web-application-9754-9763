{"is_source_file": true, "format": "JavaScript (Node.js)", "description": "The file 'server.js' sets up an HTTP server with Express, WebSocket server, and routes for user registration, login, and health check. It includes middleware configurations, WebSocket message handling, and authentication logic, indicating it is the main entry point and core server logic of a web application.", "external_files": ["dotenv", "ws", "express", "cors", "body-parser", "morgan", "express-validator", "bcryptjs", "jsonwebtoken", "http"], "external_methods": ["require", "app.use", "jwt.verify", "app.post", "app.get", "console.log", "console.error", "process.exit", "server.listen", "server.on", "process.on"], "published": ["app", "server", "wss"], "classes": [], "methods": [{"name": "startServer", "description": "Initializes and starts the HTTP server, sets up error handling, and listens for connections."}, {"name": "connection(ws, req)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "incoming(message)", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["require('dotenv').config()", "require('http').createServer(app)", "new WebSocket.Server", "app.use", "jwt.sign", "jwt.verify", "app.post", "app.get", "server.listen", "server.on", "process.on"], "search-terms": ["WebSocket server setup", "JWT authentication", "Express route handlers", "WebSocket message handling", "environment variable configuration", "server startup"], "state": 2, "file_id": 71, "knowledge_revision": 331, "git_revision": "b34af228d11d82affd6977121527d0c74366be7c", "ctags": [{"_type": "tag", "name": "JWT_SECRET", "path": "/home/kavia/workspace/code-generation/daily-journal-web-app-web-application-9754-9763/server.js", "pattern": "/^const JWT_SECRET = process.env.JWT_SECRET || 'your-secret-key';$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "NODE_ENV", "path": "/home/kavia/workspace/code-generation/daily-journal-web-app-web-application-9754-9763/server.js", "pattern": "/^const NODE_ENV = process.env.NODE_ENV || 'development';$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "PORT", "path": "/home/kavia/workspace/code-generation/daily-journal-web-app-web-application-9754-9763/server.js", "pattern": "/^const PORT = parseInt(process.env.PORT || '3001', 10);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "WebSocket", "path": "/home/kavia/workspace/code-generation/daily-journal-web-app-web-application-9754-9763/server.js", "pattern": "/^const WebSocket = require('ws');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "app", "path": "/home/kavia/workspace/code-generation/daily-journal-web-app-web-application-9754-9763/server.js", "pattern": "/^const app = express();$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "authHeader", "path": "/home/kavia/workspace/code-generation/daily-journal-web-app-web-application-9754-9763/server.js", "pattern": "/^    const authHeader = req.headers['authorization'];$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "authenticateToken", "path": "/home/kavia/workspace/code-generation/daily-journal-web-app-web-application-9754-9763/server.js", "pattern": "/^const authenticateToken = (req, res, next) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "bcrypt", "path": "/home/kavia/workspace/code-generation/daily-journal-web-app-web-application-9754-9763/server.js", "pattern": "/^const bcrypt = require('bcryptjs');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "bodyParser", "path": "/home/kavia/workspace/code-generation/daily-journal-web-app-web-application-9754-9763/server.js", "pattern": "/^const bodyParser = require('body-parser');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "connection", "path": "/home/kavia/workspace/code-generation/daily-journal-web-app-web-application-9754-9763/server.js", "pattern": "/^wss.on('connection', function connection(ws, req) {$/", "language": "JavaScript", "kind": "function", "signature": "(ws, req)"}, {"_type": "tag", "name": "cors", "path": "/home/kavia/workspace/code-generation/daily-journal-web-app-web-application-9754-9763/server.js", "pattern": "/^const cors = require('cors');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "express", "path": "/home/kavia/workspace/code-generation/daily-journal-web-app-web-application-9754-9763/server.js", "pattern": "/^const express = require('express');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "incoming", "path": "/home/kavia/workspace/code-generation/daily-journal-web-app-web-application-9754-9763/server.js", "pattern": "/^    ws.on('message', function incoming(message) {$/", "language": "JavaScript", "kind": "function", "signature": "(message)"}, {"_type": "tag", "name": "jwt", "path": "/home/kavia/workspace/code-generation/daily-journal-web-app-web-application-9754-9763/server.js", "pattern": "/^const jwt = require('jsonwebtoken');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "loginValidation", "path": "/home/kavia/workspace/code-generation/daily-journal-web-app-web-application-9754-9763/server.js", "pattern": "/^const loginValidation = [$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "morgan", "path": "/home/kavia/workspace/code-generation/daily-journal-web-app-web-application-9754-9763/server.js", "pattern": "/^const morgan = require('morgan');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "registerValidation", "path": "/home/kavia/workspace/code-generation/daily-journal-web-app-web-application-9754-9763/server.js", "pattern": "/^const registerValidation = [$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "server", "path": "/home/kavia/workspace/code-generation/daily-journal-web-app-web-application-9754-9763/server.js", "pattern": "/^const server = require('http').createServer(app);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "startServer", "path": "/home/kavia/workspace/code-generation/daily-journal-web-app-web-application-9754-9763/server.js", "pattern": "/^const startServer = async () => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "token", "path": "/home/kavia/workspace/code-generation/daily-journal-web-app-web-application-9754-9763/server.js", "pattern": "/^    const token = authHeader && authHeader.split(' ')[1];$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "wss", "path": "/home/kavia/workspace/code-generation/daily-journal-web-app-web-application-9754-9763/server.js", "pattern": "/^const wss = new WebSocket.Server({ $/", "language": "JavaScript", "kind": "constant"}], "filename": "/home/kavia/workspace/code-generation/daily-journal-web-app-web-application-9754-9763/server.js", "hash": "609f636f57ae4f8681b798ac9b2cba64", "format-version": 4, "code-base-name": "default", "revision_history": [{"331": "b34af228d11d82affd6977121527d0c74366be7c"}]}