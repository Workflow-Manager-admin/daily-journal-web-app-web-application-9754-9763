{"is_source_file": true, "format": "JavaScript", "description": "This file defines an AuthService class for handling user authentication operations, including registration, login, and logout, with robust error handling, retries, circuit breaker logic, and connection checks. It also declares custom error classes and internal utility functions for managing API requests and connection reliability.", "external_files": ["../config/api.config"], "external_methods": [], "published": ["AuthService"], "classes": [{"name": "AuthenticationError", "description": "Custom error class for authentication-related errors."}, {"name": "NetworkError", "description": "Custom error class for network-related errors."}, {"name": "ServerError", "description": "Custom error class for server-side errors."}, {"name": "ValidationError", "description": "Custom error class for validation errors."}, {"name": "CircuitBreaker", "description": "Implements circuit breaker pattern to prevent repeated failing requests."}, {"name": "RequestQueue", "description": "Manages a queue of failed network requests for retrying later."}], "methods": [{"name": "register(name, email, password)", "description": "Registers a new user with name, email, and password; stores token on success.", "scope": "AuthService", "scopeKind": "class"}, {"name": "login(email, password)", "description": "Authenticates a user with email and password; stores token and timestamp.", "scope": "AuthService", "scopeKind": "class"}, {"name": "logout()", "description": "Logs out the current user, invalidating the token both locally and via server request.", "scope": "AuthService", "scopeKind": "class"}, {"name": "clearAuthData()", "description": "Removes stored authentication token and timestamp from localStorage.", "scope": "AuthService", "scopeKind": "class"}, {"name": "getToken()", "description": "Retrieves stored authentication token from localStorage.", "scope": "AuthService", "scopeKind": "class"}, {"name": "isAuthenticated()", "description": "Checks whether there is a valid stored token indicating an authenticated session.", "scope": "AuthService", "scopeKind": "class"}, {"name": "add(request)", "scope": "RequestQueue", "scopeKind": "class", "description": "unavailable"}, {"name": "calculateRetryDelay(retryAttempt)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "canRequest()", "scope": "CircuitBreaker", "scopeKind": "class", "description": "unavailable"}, {"name": "checkConnection()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "constructor()", "scope": "RequestQueue", "scopeKind": "class", "description": "unavailable"}, {"name": "constructor(message = 'A network error occurred', context = {})", "scope": "NetworkError", "scopeKind": "class", "description": "unavailable"}, {"name": "constructor(message = 'A server error occurred', context = {})", "scope": "ServerError", "scopeKind": "class", "description": "unavailable"}, {"name": "constructor(message = 'Validation failed', context = {})", "scope": "ValidationError", "scopeKind": "class", "description": "unavailable"}, {"name": "constructor(message, context = {})", "scope": "AuthenticationError", "scopeKind": "class", "description": "unavailable"}, {"name": "isRetryableError(error)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "makeRequest(url, options, retries = API_CONFIG.REQUEST_CONFIG.retries)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "processQueue()", "scope": "RequestQueue", "scopeKind": "class", "description": "unavailable"}, {"name": "recordFailure()", "scope": "CircuitBreaker", "scopeKind": "class", "description": "unavailable"}, {"name": "recordSuccess()", "scope": "CircuitBreaker", "scopeKind": "class", "description": "unavailable"}], "calls": ["makeRequest", "checkConnection", "calculateRetryDelay", "isRetryableError"], "search-terms": ["authService", "CircuitBreaker", "retry logic", "logout", "token storage", "network error", "validation error"], "state": 2, "file_id": 106, "knowledge_revision": 368, "git_revision": "b34af228d11d82affd6977121527d0c74366be7c", "ctags": [{"_type": "tag", "name": "AuthService", "path": "/home/kavia/workspace/code-generation/daily-journal-web-app-web-application-9754-9763/journal_entry_component/src/services/authService.js", "pattern": "/^class AuthService {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "AuthenticationError", "path": "/home/kavia/workspace/code-generation/daily-journal-web-app-web-application-9754-9763/journal_entry_component/src/services/authService.js", "pattern": "/^class AuthenticationError extends Error {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "CircuitBreaker", "path": "/home/kavia/workspace/code-generation/daily-journal-web-app-web-application-9754-9763/journal_entry_component/src/services/authService.js", "pattern": "/^class CircuitBreaker {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "NetworkError", "path": "/home/kavia/workspace/code-generation/daily-journal-web-app-web-application-9754-9763/journal_entry_component/src/services/authService.js", "pattern": "/^class NetworkError extends Error {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "RequestQueue", "path": "/home/kavia/workspace/code-generation/daily-journal-web-app-web-application-9754-9763/journal_entry_component/src/services/authService.js", "pattern": "/^class RequestQueue {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "ServerError", "path": "/home/kavia/workspace/code-generation/daily-journal-web-app-web-application-9754-9763/journal_entry_component/src/services/authService.js", "pattern": "/^class ServerError extends Error {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "ValidationError", "path": "/home/kavia/workspace/code-generation/daily-journal-web-app-web-application-9754-9763/journal_entry_component/src/services/authService.js", "pattern": "/^class ValidationError extends Error {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "add", "path": "/home/kavia/workspace/code-generation/daily-journal-web-app-web-application-9754-9763/journal_entry_component/src/services/authService.js", "pattern": "/^  add(request) {$/", "language": "JavaScript", "kind": "method", "signature": "(request)", "scope": "RequestQueue", "scopeKind": "class"}, {"_type": "tag", "name": "calculateRetryDelay", "path": "/home/kavia/workspace/code-generation/daily-journal-web-app-web-application-9754-9763/journal_entry_component/src/services/authService.js", "pattern": "/^function calculateRetryDelay(retryAttempt) {$/", "language": "JavaScript", "kind": "function", "signature": "(retryAttempt)"}, {"_type": "tag", "name": "canRequest", "path": "/home/kavia/workspace/code-generation/daily-journal-web-app-web-application-9754-9763/journal_entry_component/src/services/authService.js", "pattern": "/^  canRequest() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "CircuitBreaker", "scopeKind": "class"}, {"_type": "tag", "name": "checkConnection", "path": "/home/kavia/workspace/code-generation/daily-journal-web-app-web-application-9754-9763/journal_entry_component/src/services/authService.js", "pattern": "/^function checkConnection() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "circuitBreaker", "path": "/home/kavia/workspace/code-generation/daily-journal-web-app-web-application-9754-9763/journal_entry_component/src/services/authService.js", "pattern": "/^const circuitBreaker = new CircuitBreaker();$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "clearAuthData", "path": "/home/kavia/workspace/code-generation/daily-journal-web-app-web-application-9754-9763/journal_entry_component/src/services/authService.js", "pattern": "/^  static clearAuthData() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "AuthService", "scopeKind": "class"}, {"_type": "tag", "name": "constructor", "path": "/home/kavia/workspace/code-generation/daily-journal-web-app-web-application-9754-9763/journal_entry_component/src/services/authService.js", "pattern": "/^  constructor() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "CircuitBreaker", "scopeKind": "class"}, {"_type": "tag", "name": "constructor", "path": "/home/kavia/workspace/code-generation/daily-journal-web-app-web-application-9754-9763/journal_entry_component/src/services/authService.js", "pattern": "/^  constructor() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "RequestQueue", "scopeKind": "class"}, {"_type": "tag", "name": "constructor", "path": "/home/kavia/workspace/code-generation/daily-journal-web-app-web-application-9754-9763/journal_entry_component/src/services/authService.js", "pattern": "/^  constructor(message = 'A network error occurred', context = {}) {$/", "language": "JavaScript", "kind": "method", "signature": "(message = 'A network error occurred', context = {})", "scope": "NetworkError", "scopeKind": "class"}, {"_type": "tag", "name": "constructor", "path": "/home/kavia/workspace/code-generation/daily-journal-web-app-web-application-9754-9763/journal_entry_component/src/services/authService.js", "pattern": "/^  constructor(message = 'A server error occurred', context = {}) {$/", "language": "JavaScript", "kind": "method", "signature": "(message = 'A server error occurred', context = {})", "scope": "ServerError", "scopeKind": "class"}, {"_type": "tag", "name": "constructor", "path": "/home/kavia/workspace/code-generation/daily-journal-web-app-web-application-9754-9763/journal_entry_component/src/services/authService.js", "pattern": "/^  constructor(message = 'Validation failed', context = {}) {$/", "language": "JavaScript", "kind": "method", "signature": "(message = 'Validation failed', context = {})", "scope": "ValidationError", "scopeKind": "class"}, {"_type": "tag", "name": "constructor", "path": "/home/kavia/workspace/code-generation/daily-journal-web-app-web-application-9754-9763/journal_entry_component/src/services/authService.js", "pattern": "/^  constructor(message, context = {}) {$/", "language": "JavaScript", "kind": "method", "signature": "(message, context = {})", "scope": "AuthenticationError", "scopeKind": "class"}, {"_type": "tag", "name": "endpoint", "path": "/home/kavia/workspace/code-generation/daily-journal-web-app-web-application-9754-9763/journal_entry_component/src/services/authService.js", "pattern": "/^      endpoint: API_CONFIG.ENDPOINTS.AUTH.LOGIN,$/", "language": "JavaScript", "kind": "property", "scope": "AuthService.login.requestContext", "scopeKind": "class"}, {"_type": "tag", "name": "endpoint", "path": "/home/kavia/workspace/code-generation/daily-journal-web-app-web-application-9754-9763/journal_entry_component/src/services/authService.js", "pattern": "/^      endpoint: API_CONFIG.ENDPOINTS.AUTH.LOGOUT,$/", "language": "JavaScript", "kind": "property", "scope": "AuthService.logout.requestContext", "scopeKind": "class"}, {"_type": "tag", "name": "endpoint", "path": "/home/kavia/workspace/code-generation/daily-journal-web-app-web-application-9754-9763/journal_entry_component/src/services/authService.js", "pattern": "/^      endpoint: API_CONFIG.ENDPOINTS.AUTH.REGISTER,$/", "language": "JavaScript", "kind": "property", "scope": "AuthService.register.requestContext", "scopeKind": "class"}, {"_type": "tag", "name": "errorContext", "path": "/home/kavia/workspace/code-generation/daily-journal-web-app-web-application-9754-9763/journal_entry_component/src/services/authService.js", "pattern": "/^      const errorContext = {$/", "language": "JavaScript", "kind": "class", "scope": "makeRequest", "scopeKind": "class"}, {"_type": "tag", "name": "getToken", "path": "/home/kavia/workspace/code-generation/daily-journal-web-app-web-application-9754-9763/journal_entry_component/src/services/authService.js", "pattern": "/^  static getToken() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "AuthService", "scopeKind": "class"}, {"_type": "tag", "name": "isAuthenticated", "path": "/home/kavia/workspace/code-generation/daily-journal-web-app-web-application-9754-9763/journal_entry_component/src/services/authService.js", "pattern": "/^  static isAuthenticated() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "AuthService", "scopeKind": "class"}, {"_type": "tag", "name": "isRetryableError", "path": "/home/kavia/workspace/code-generation/daily-journal-web-app-web-application-9754-9763/journal_entry_component/src/services/authService.js", "pattern": "/^function isRetryableError(error) {$/", "language": "JavaScript", "kind": "function", "signature": "(error)"}, {"_type": "tag", "name": "login", "path": "/home/kavia/workspace/code-generation/daily-journal-web-app-web-application-9754-9763/journal_entry_component/src/services/authService.js", "pattern": "/^  static async login(email, password) {$/", "language": "JavaScript", "kind": "method", "signature": "(email, password)", "scope": "AuthService", "scopeKind": "class"}, {"_type": "tag", "name": "logout", "path": "/home/kavia/workspace/code-generation/daily-journal-web-app-web-application-9754-9763/journal_entry_component/src/services/authService.js", "pattern": "/^  static async logout() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "AuthService", "scopeKind": "class"}, {"_type": "tag", "name": "makeRequest", "path": "/home/kavia/workspace/code-generation/daily-journal-web-app-web-application-9754-9763/journal_entry_component/src/services/authService.js", "pattern": "/^async function makeRequest(url, options, retries = API_CONFIG.REQUEST_CONFIG.retries) {$/", "language": "JavaScript", "kind": "function", "signature": "(url, options, retries = API_CONFIG.REQUEST_CONFIG.retries)"}, {"_type": "tag", "name": "method", "path": "/home/kavia/workspace/code-generation/daily-journal-web-app-web-application-9754-9763/journal_entry_component/src/services/authService.js", "pattern": "/^      method: 'POST',$/", "language": "JavaScript", "kind": "property", "scope": "AuthService.login.requestContext", "scopeKind": "class"}, {"_type": "tag", "name": "method", "path": "/home/kavia/workspace/code-generation/daily-journal-web-app-web-application-9754-9763/journal_entry_component/src/services/authService.js", "pattern": "/^      method: 'POST',$/", "language": "JavaScript", "kind": "property", "scope": "AuthService.logout.requestContext", "scopeKind": "class"}, {"_type": "tag", "name": "method", "path": "/home/kavia/workspace/code-generation/daily-journal-web-app-web-application-9754-9763/journal_entry_component/src/services/authService.js", "pattern": "/^      method: 'POST',$/", "language": "JavaScript", "kind": "property", "scope": "AuthService.register.requestContext", "scopeKind": "class"}, {"_type": "tag", "name": "processQueue", "path": "/home/kavia/workspace/code-generation/daily-journal-web-app-web-application-9754-9763/journal_entry_component/src/services/authService.js", "pattern": "/^  async processQueue() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "RequestQueue", "scopeKind": "class"}, {"_type": "tag", "name": "recordFailure", "path": "/home/kavia/workspace/code-generation/daily-journal-web-app-web-application-9754-9763/journal_entry_component/src/services/authService.js", "pattern": "/^  recordFailure() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "CircuitBreaker", "scopeKind": "class"}, {"_type": "tag", "name": "recordSuccess", "path": "/home/kavia/workspace/code-generation/daily-journal-web-app-web-application-9754-9763/journal_entry_component/src/services/authService.js", "pattern": "/^  recordSuccess() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "CircuitBreaker", "scopeKind": "class"}, {"_type": "tag", "name": "register", "path": "/home/kavia/workspace/code-generation/daily-journal-web-app-web-application-9754-9763/journal_entry_component/src/services/authService.js", "pattern": "/^  static async register(name, email, password) {$/", "language": "JavaScript", "kind": "method", "signature": "(name, email, password)", "scope": "AuthService", "scopeKind": "class"}, {"_type": "tag", "name": "requestContext", "path": "/home/kavia/workspace/code-generation/daily-journal-web-app-web-application-9754-9763/journal_entry_component/src/services/authService.js", "pattern": "/^    const requestContext = {$/", "language": "JavaScript", "kind": "class", "scope": "AuthService.login", "scopeKind": "class"}, {"_type": "tag", "name": "requestContext", "path": "/home/kavia/workspace/code-generation/daily-journal-web-app-web-application-9754-9763/journal_entry_component/src/services/authService.js", "pattern": "/^    const requestContext = {$/", "language": "JavaScript", "kind": "class", "scope": "AuthService.logout", "scopeKind": "class"}, {"_type": "tag", "name": "requestContext", "path": "/home/kavia/workspace/code-generation/daily-journal-web-app-web-application-9754-9763/journal_entry_component/src/services/authService.js", "pattern": "/^    const requestContext = {$/", "language": "JavaScript", "kind": "class", "scope": "AuthService.register", "scopeKind": "class"}, {"_type": "tag", "name": "requestQueue", "path": "/home/kavia/workspace/code-generation/daily-journal-web-app-web-application-9754-9763/journal_entry_component/src/services/authService.js", "pattern": "/^const requestQueue = new RequestQueue();$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "status", "path": "/home/kavia/workspace/code-generation/daily-journal-web-app-web-application-9754-9763/journal_entry_component/src/services/authService.js", "pattern": "/^        status: response.status,$/", "language": "JavaScript", "kind": "property", "scope": "makeRequest.errorContext", "scopeKind": "class"}, {"_type": "tag", "name": "timestamp", "path": "/home/kavia/workspace/code-generation/daily-journal-web-app-web-application-9754-9763/journal_entry_component/src/services/authService.js", "pattern": "/^      timestamp: new Date().toISOString()$/", "language": "JavaScript", "kind": "property", "scope": "AuthService.login.requestContext", "scopeKind": "class"}, {"_type": "tag", "name": "timestamp", "path": "/home/kavia/workspace/code-generation/daily-journal-web-app-web-application-9754-9763/journal_entry_component/src/services/authService.js", "pattern": "/^      timestamp: new Date().toISOString()$/", "language": "JavaScript", "kind": "property", "scope": "AuthService.logout.requestContext", "scopeKind": "class"}, {"_type": "tag", "name": "timestamp", "path": "/home/kavia/workspace/code-generation/daily-journal-web-app-web-application-9754-9763/journal_entry_component/src/services/authService.js", "pattern": "/^      timestamp: new Date().toISOString()$/", "language": "JavaScript", "kind": "property", "scope": "AuthService.register.requestContext", "scopeKind": "class"}, {"_type": "tag", "name": "url", "path": "/home/kavia/workspace/code-generation/daily-journal-web-app-web-application-9754-9763/journal_entry_component/src/services/authService.js", "pattern": "/^        url,$/", "language": "JavaScript", "kind": "field", "scope": "makeRequest.errorContext", "scopeKind": "class"}], "filename": "/home/kavia/workspace/code-generation/daily-journal-web-app-web-application-9754-9763/journal_entry_component/src/services/authService.js", "hash": "2247d0964b9c6b76f5456dd44896d2ee", "format-version": 4, "code-base-name": "default", "fields": [{"name": "endpoint: API_CONFIG.ENDPOINTS.AUTH.LOGIN,", "scope": "AuthService.login.requestContext", "scopeKind": "class", "description": "unavailable"}, {"name": "endpoint: API_CONFIG.ENDPOINTS.AUTH.LOGOUT,", "scope": "AuthService.logout.requestContext", "scopeKind": "class", "description": "unavailable"}, {"name": "endpoint: API_CONFIG.ENDPOINTS.AUTH.REGISTER,", "scope": "AuthService.register.requestContext", "scopeKind": "class", "description": "unavailable"}, {"name": "method: 'POST',", "scope": "AuthService.login.requestContext", "scopeKind": "class", "description": "unavailable"}, {"name": "status: response.status,", "scope": "makeRequest.errorContext", "scopeKind": "class", "description": "unavailable"}, {"name": "timestamp: new Date().toISOString()", "scope": "AuthService.login.requestContext", "scopeKind": "class", "description": "unavailable"}, {"name": "url,", "scope": "makeRequest.errorContext", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"368": "b34af228d11d82affd6977121527d0c74366be7c"}]}